<!DOCTYPE html>
<html lang="es">
  {% load static %}
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MiProyecto</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="{% static 'ecoavatar/css/styles.css' %}" />
  </head>
  <body>
    <!-- Barra de navegación -->
    <nav class="navbar">
      <div class="navbar-brand">
        <a href="#" class="logo">
          <img src="{% static 'ecoavatar/images/logo.png' %}" alt="logo" />
        </a>
      </div>
      <ul class="navbar-links">
        {% if user.is_authenticated %}
        <li><a href="#">Inicio</a></li>
        <li><a href="{% url "ecoavatar:list_post" %}">Publicaciones</a></li>
        <li><a href="#challenges">Desafíos</a></li>
      </ul>
      <div class="navbar-actions">
        <button class="login-btn" href="{% url "logout" %}">Cerrar Sesión</button>
      </div>
      {% else %}
      <div class="navbar-actions">
        <button class="login-btn" href="{% url "ecoavatar:login" %}">Iniciar Sesión</button>
      </div>
      {% endif %}

    </nav>

    <!-- Encabezado -->
    <div class="header-content">
      <h1>¡Bienvenido a nuestro mundo!</h1>
      <h2>
        Explora y participa en desafíos que cuidan el planeta. ¡Haz tu impacto
        positivo!
      </h2>
    </div>

    <!-- Lienzo del personaje -->
    <div class="caracter">
      <h1>Personaje</h1>
      <canvas
        id="pixelCanvas"
        data-sprite-sheet="{% static 'ecoavatar/images/character.png' %}"
        data-hat="{% static 'ecoavatar/images/hat.png' %}"
      ></canvas>
      <div class="actions">
        {% comment %} <button href="#challenges">Completar Tarea</button> {% endcomment %}
        <button onclick="equipReward()">Equipar Recompensa</button>
      </div>
      <p>Nombre Personaje</p>
    </div>

    <!-- Modal de Desafíos -->
    <div id="challengeModal" class="modal">
      <div class="modal-content">
        <h2>Completar Desafío</h2>
        <form id="challengeForm" enctype="multipart/form-data">
          {% csrf_token %}
          <input 
            type="file" 
            name="photo" 
            id="challengePhoto" 
            accept="image/*" 
            required
          >
          <textarea 
            name="description" 
            id="challengeDescription" 
            placeholder="Describe cómo completaste el desafío" 
            rows="4" 
            maxlength="75" 
            required
          ></textarea>
          <div class="modal-buttons">
            <button type="button" class="btn-cancel" onclick="closeModal()">Cancelar</button>
            <button type="submit" class="btn-publish" onclick="completeChallenge()">Publicar</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Sección de Desafíos -->
    <section id="challenges" class="challenges-container">
      <h2>Desafíos Activos</h2>
      <ul>
        <li>Reciclar una botella <button onclick="openChallengeModal('Reciclar una botella')">Completar</button></li>
        <li>Apagar las luces <button onclick="openChallengeModal('Apagar las luces')">Completar</button></li>
      </ul>
      <ul>
        <li>Plantar un árbol <button onclick="openChallengeModal('Plantar un árbol')">Completar</button></li>
        <li>Hacer composta <button onclick="openChallengeModal('Hacer composta')">Completar</button></li>
      </ul>
    </section>

    <!-- Sección de Publicaciones -->
    <section id="publicaciones" class="publicaciones">
      <div class="foro">
        <h3>Foro de Discusión</h3>
        <textarea
          class="foro-textarea"
          placeholder="Escribe un comentario..."
          rows="4"
        ></textarea>
        <button class="btn-publicar">Publicar</button>

        <ul class="comentarios">
          <li class="comentario-item">
            <div class="comentario-box">
              <img
                src="https://img.freepik.com/vector-premium/imagen-perfil-avatar-hombre-aislada-fondo-imagen-profil-avatar-hombre_1293239-4867.jpg?w=740"
                alt="Foto de perfil"
                class="comentario-img"
              />
              <div class="comentario-content">
                <p class="comentario-username">Usuario 1:</p>
                <p>Este es un ejemplo de comentario con imagen de perfil.</p>
              </div>
            </div>
          </li>
          <li class="comentario-item">
            <div class="comentario-box">
              <img
                src="https://cdn.icon-icons.com/icons2/2859/PNG/512/avatar_face_girl_female_woman_profile_smiley_happy_people_icon_181665.png"
                alt="Foto de perfil"
                class="comentario-img"
              />
              <div class="comentario-content">
                <p class="comentario-username">Usuario 2:</p>
                <p>Otro comentario con imagen de perfil simulada.</p>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </section>
    <script src="{% static 'ecoavatar/js/script.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  </body>
</html>
